#!/bin/sh
mkdir -p ~/FOR_OFFLINE_USE

# Emacs
# LATEST
curl -L https://mirrors.tripadvisor.com/gnu/emacs/emacs-27.2.tar.gz --output ~/FOR_OFFLINE_USE/emacs.tar.gz --silent

# NATIVE COMP
[ ! -d ~/.local/src/emacs ] && git clone git://git.sv.gnu.org/emacs.git ~/.local/src/emacs # clone if not exists
cd ~/.local/src/emacs
git checkout feature/native-comp

cd ~
zip -qqr ~/FOR_OFFLINE_USE/emacs-native-comp.zip ~/.local/src/emacs
echo "Finished emacs-zip"

# Current emacs install
zip -qqr ~/FOR_OFFLINE_USE/emacs.d.zip ~/.emacs.d
echo "Finished emacs.d-zip"

# Doom
zip -qqr ~/FOR_OFFLINE_USE/doom.d.zip ~/.doom.d
echo "Finished doom.d-zip"

# README for documetation
zip -qqr ~/FOR_OFFLINE_USE/README.zip ~/README/README.org
echo "Finished readme.org-zip"

# XFCE
[ ! -d ~/.config/xfce4/xfconf/xfce-perchannel-xml ] && \
    mkdir -p ~/.config/xfce4/xfconf && \
    git clone https://github.com/troyfischer/xfce-config ~/.config/xfce4/xfconf/xfce-perchannel-xml
zip -qqr ~/FOR_OFFLINE_USE/xfce-configuration.zip ~/.config/xfce4/xfconf/xfce-perchannel-xml
echo "Finished xfce-configuration-zip"

# Any packages that may not exist
zip -qqr ~/FOR_OFFLINE_USE/packages.zip ~/.local/share/packages
echo "Finished debian-package-zip"

# Fonts
zip -qqr ~/FOR_OFFLINE_USE/fonts.zip ~/.local/share/fonts
echo "Finished fonts-zip"

# final zip
zip -qq -r FOR_OFFLINE_USE.zip FOR_OFFLINE_USE
echo "Finished FOR_OFFLINE_USE zip"

rm -rf ~/FOR_OFFLINE_USE

echo "offline_zip script complete!"
